<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Notes CRUD App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>üìù My Notes</h1>

    <div id="notes"></div>

    <input id="noteInput" type="text" placeholder="Enter note..." />
    <button onclick="addNote()">Add</button>

    <script>
        const apiUrl = '/api/notes';

        async function loadNotes() {
            const res = await fetch(apiUrl);
            const data = await res.json();
            const container = document.getElementById('notes');
            container.innerHTML = '';
            data.forEach(note => {
                const div = document.createElement('div');
                div.className = 'note';
                div.innerHTML = `
                    <span>${note.title}</span>
                    <button onclick="deleteNote(${note.id})">Delete</button>
                `;
                container.appendChild(div);
            });
        }

        async function addNote() {
            const title = document.getElementById('noteInput').value;
            if (!title) return alert('Enter a note title');
            await fetch(apiUrl, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ title })
            });
            document.getElementById('noteInput').value = '';
            loadNotes();
        }

        async function deleteNote(id) {
            await fetch(`${apiUrl}/${id}`, { method: 'DELETE' });
            loadNotes();
        }

        loadNotes();
    </script>
</body>
</html>
